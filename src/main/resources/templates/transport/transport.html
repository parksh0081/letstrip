<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>êµí†µí¸ ì •ë³´</title>
<style type="text/css">
body .transport-container {
	margin-top: 20px;
	font-family: Roboto, sans-serif;
    /* background-color: #f4f4f9; */
    text-align: center;
}

h2 {
    color: #333;
    font-weight: bold;
}

.transbutton {
	width: 150px;
	border: none;
}

.transbutton:hover {
	background-color: #FF9000;
}

#transport-form {
	background: #f4f4f9;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: inline-block;
    text-align: left;
    margin-top: 20px;
    margin-bottom: 30px;
    width: 380px;
}

label {
    font-weight: bold;
    margin-top: 10px;
}

input {
    width: 345px;
    padding: 8px;
    margin: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
}

.search {
	width: 340px;
	margin-top: 10px;
	border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #FF9000;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
}

/* button:hover {
    background-color: #FF9000;
} */

.table-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 20px;
}

.transport-table {
    width: 100%;
    max-width: 500px; /* í…Œì´ë¸” í¬ê¸° ì¡°ì ˆ */
    border-collapse: collapse;
    border: 2px solid #333; /* í…Œë‘ë¦¬ í™•ì‹¤í•˜ê²Œ ì ìš© */
    background-color: #fff;
    margin: 0 auto;
}

.transport-table th, .transport-table td {
    border: 1px solid #333; /* ì…€ë§ˆë‹¤ í…Œë‘ë¦¬ ì ìš© */
    padding: 10px;
    text-align: left;
}

.transport-table th {
    background-color: #f4f4f9;
    font-weight: bold;
}


</style>
</head>
<body>
<div class="header-container">
    <div th:replace="~{layouts/header}"></div>
</div>
    <div class="transport-container">
        <h2>Drive Schedule</h2>
        <div style="margin-bottom: 10px;">
        	<input type="button" class="transbutton" value="ğŸš— ìì°¨" onclick="location.href='/transport'">
	        <input type="button" class="transbutton" value="ğŸšŒ ë²„ìŠ¤" onclick="location.href='/bus'">
	        <input type="button" class="transbutton" value="ğŸš† ê¸°ì°¨" onclick="location.href='/train'">
        </div>
        <form id="transport-form">
		    <div>
		        <label for="departure">ì¶œë°œì§€</label>
		        <input type="text" id="departure" name="departure" required>
		    </div>
		    <div>
		        <label for="arrival">ë„ì°©ì§€</label>
		        <input type="text" id="arrival" name="arrival" required>
		    </div>
		    <button type="submit" class="search">ì¡°íšŒ</button>
		</form>

        <div id="transport-result">
            <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— ì¶œë ¥ë©ë‹ˆë‹¤ -->
        </div>
    </div>
    <!--<script src="/js/app.js"></script>  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—°ê²° -->
    <script type="text/javascript">
    document.getElementById('transport-form').addEventListener('submit', function(event) {
        event.preventDefault(); // ê¸°ë³¸ í¼ ì œì¶œ ë°©ì§€

        const departure = document.getElementById('departure').value;
        const arrival = document.getElementById('arrival').value;

        // API ìš”ì²­ URL ìƒì„±
        const url = `/api/transport?departure=${encodeURIComponent(departure)}&arrival=${encodeURIComponent(arrival)}`;

        // ë¹„ë™ê¸° ìš”ì²­ ë³´ë‚´ê¸°
        fetch(url)
            .then(response => response.json())
            .then(data => {
            	const { carRoute } = data;

                if (carRoute && carRoute.distance) {
                    const distanceKm = (carRoute.distance / 1000).toFixed(1) + " km";
                    const durationHours = Math.floor(carRoute.duration / 3600);
                    const durationMinutes = Math.floor((carRoute.duration % 3600) / 60);
                    const durationStr = `${durationHours}ì‹œê°„ ${durationMinutes}ë¶„`;
                    const taxiFare = carRoute.fare.taxi.toLocaleString() + "ì›";
                    const tollFare = carRoute.fare.toll.toLocaleString() + "ì›";
            	
                 	// ê²°ê³¼ ì¶œë ¥
                    const resultContainer = document.getElementById('transport-result');
                    resultContainer.innerHTML = `
                        <h3>ğŸš— ìì°¨ ê²½ë¡œ ì •ë³´</h3>
                        <table class="transport-table">
                                <tr>
                                    <th>ì¶œë°œì§€</th>
                                    <td>${data.departure}</td>
                                </tr>
                                <tr>
                                    <th>ë„ì°©ì§€</th>
                                    <td>${data.arrival}</td>
                                <tr>
                                    <th>ì†Œìš” ì‹œê°„</th>
                                    <td>${durationStr}</td>
                                </tr>
                                <tr>
                                    <th>íƒì‹œ ìš”ê¸ˆ</th>
                                    <td>${taxiFare}</td>
                                </tr>
                                <tr>
                                    <th>í†µí–‰ë£Œ</th>
                                    <td>${tollFare}</td>
                                </tr>
                                <tr>
                                    <th>ê±°ë¦¬</th>
                                    <td>${distanceKm}</td>
                                </tr>
                            
                        </table>
                    `;
                } else {
                    resultDiv.innerHTML = `<p>ğŸš¨ ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>`;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('transport-result').innerHTML = 'êµí†µí¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            });
    });

    </script>

</body>
</html>



